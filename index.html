<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android 4 Browser Emulator</title>
    <style>
        /* Android 4.0 Holo Design Grundgerüst */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #222;
            color: white;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Adressleiste (Toolbar) */
        #toolbar {
            background: linear-gradient(to bottom, #444, #222);
            padding: 8px;
            display: flex;
            align-items: center;
            border-bottom: 2px solid #0099cc;
            gap: 10px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px 10px;
        }

        .nav-btn:disabled { color: #555; }

        #url-bar {
            flex-grow: 1;
            background: #fff;
            border: 1px solid #0099cc;
            padding: 6px 10px;
            border-radius: 2px;
            color: #333;
            font-size: 14px;
        }

        /* Tab-Leiste */
        #tab-bar {
            background: #1a1a1a;
            display: flex;
            border-bottom: 1px solid #333;
            overflow-x: auto;
        }

        .tab {
            padding: 10px 15px;
            background: #333;
            border-right: 1px solid #444;
            min-width: 100px;
            max-width: 150px;
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }

        .tab.active {
            background: #0099cc;
            color: white;
        }

        /* Browser Inhalt */
        #browser-content {
            flex-grow: 1;
            background: white;
            position: relative;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Android 4 Popup Overlay */
        #popup-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        #popup-window {
            background: #f0f0f0;
            width: 85%;
            max-width: 300px;
            border-radius: 2px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            color: #333;
        }

        #popup-header {
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #0099cc;
            border-bottom: 1px solid #0099cc;
        }

        #popup-body {
            padding: 20px 15px;
            font-size: 14px;
            line-height: 1.4;
        }

        #popup-footer {
            display: flex;
            border-top: 1px solid #ccc;
        }

        #popup-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            text-transform: uppercase;
        }

        #popup-btn:active { background: #ddd; }

    </style>
</head>
<body>

    <div id="toolbar">
        <button class="nav-btn" onclick="goBack()">◀</button>
        <button class="nav-btn" onclick="goForward()">▶</button>
        <input type="text" id="url-bar" value="https://www.wikipedia.org" onkeydown="handleEnter(event)">
        <button class="nav-btn" onclick="addTab()">✚</button>
    </div>

    <div id="tab-bar">
        </div>

    <div id="browser-content">
        <iframe id="viewport" src="https://www.wikipedia.org"></iframe>

        <div id="popup-overlay">
            <div id="popup-window">
                <div id="popup-header" id="popup-title">Systemmeldung</div>
                <div id="popup-body" id="popup-msg">
                    Auf <span id="site-name">Website</span> wird folgendes angezeigt:
                    <br><br>
                    <span id="actual-content">Inhalt der Nachricht...</span>
                </div>
                <div id="popup-footer">
                    <button id="popup-btn" onclick="closePopup()">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let tabs = [
            { id: 1, url: 'https://www.wikipedia.org', title: 'Wikipedia' }
        ];
        let activeTabId = 1;

        function renderTabs() {
            const tabBar = document.getElementById('tab-bar');
            tabBar.innerHTML = '';
            tabs.forEach(tab => {
                const div = document.createElement('div');
                div.className = `tab ${tab.id === activeTabId ? 'active' : ''}`;
                div.innerText = tab.title;
                div.onclick = () => switchTab(tab.id);
                tabBar.appendChild(div);
            });
        }

        function switchTab(id) {
            activeTabId = id;
            const tab = tabs.find(t => t.id === id);
            document.getElementById('url-bar').value = tab.url;
            document.getElementById('viewport').src = tab.url;
            renderTabs();
        }

        function addTab() {
            const newId = tabs.length > 0 ? Math.max(...tabs.map(t => t.id)) + 1 : 1;
            tabs.push({ id: newId, url: 'https://www.google.com/search?igu=1', title: 'Neuer Tab' });
            switchTab(newId);
        }

        function handleEnter(e) {
            if (e.key === 'Enter') {
                let url = document.getElementById('url-bar').value;
                if (!url.startsWith('http')) url = 'https://' + url;
                
                const currentTab = tabs.find(t => t.id === activeTabId);
                currentTab.url = url;
                document.getElementById('viewport').src = url;
                renderTabs();
            }
        }

        // NAVIGATION (Eingeschränkt durch Iframe-Sicherheit)
        function goBack() { window.history.back(); }
        function goForward() { window.history.forward(); }

        // POPUP LOGIK
        // Da wir echte Popups von fremden Seiten nicht "lesen" können,
        // hier die Funktion, um das Android-4-Style Popup manuell zu triggern.
        function showAndroidPopup(site, message) {
            document.getElementById('site-name').innerText = site;
            document.getElementById('actual-content').innerText = message;
            document.getElementById('popup-overlay').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('popup-overlay').style.display = 'none';
        }

        // Beispiel-Trigger (kannst du zum Testen in der Konsole aufrufen)
        // showAndroidPopup('google.com', 'Möchten Sie den Standort teilen?');

        renderTabs();
    </script>
</body>
</html>
